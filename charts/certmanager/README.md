# certmanager

![Version: 0.2.0](https://img.shields.io/badge/Version-0.2.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.16.0](https://img.shields.io/badge/AppVersion-1.16.0-informational?style=flat-square)

A Helm chart to deploy OpenShift cert-manager operator with proper DNS nameserver configuration for Validated Patterns.

This chart uses the supported `controllerConfig.overrideArgs` configuration instead of the deprecated `unsupportedConfigOverrides` to ensure proper DNS nameserver configuration for DNS01 challenges. The template supports flexible nameserver configuration and additional controller arguments.

**Homepage:** <https://github.com/validatedpatterns/layered-zero-trust>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| Validated Patterns Team | <validatedpatterns@googlegroups.com> |  |

## Requirements

- OpenShift 4.12+
- Cluster administrator privileges

## Installation

```bash
helm install certmanager ./charts/certmanager
```

## Configuration

### DNS Nameservers

The chart configures external DNS nameservers for DNS01 challenges. This is required because OpenShift's internal split-view DNS servers don't work well with ACME DNS01 challenges.

### Additional Arguments

You can pass additional arguments to the cert-manager controller using the `additionalArgs` configuration.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| certmgrOperator.additionalArgs | list | `[]` | Additional arguments to pass to the cert-manager controller (optional) |
| certmgrOperator.nameservers | list | `["8.8.8.8:53","1.1.1.1:53"]` | List of DNS server (ip:port strings) to be used when doing DNS01 challenges (Defaults to [8.8.8.8:53, 1.1.1.1:53]) These two are needed because the DNS01 ACME solver needs outside DNS servers and won't really work with openshift's internal split-view DNS servers [cert-manager DNS01 documentation](<https://cert-manager.io/docs/configuration/acme/dns01/#setting-nameservers-for-dns01-self-check>) |
| global | string | depends on the individual settings | Dictionary of the global settings to configure this chart |
| installerType | string | `"argocd"` | Type of installer being used (argocd, helm, etc.) |
| operatorChannel | string | `"stable-v1"` | String the channel to install cert-manager from (Defaults to "stable-v1") |

## Examples

### Basic Configuration

```yaml
certmgrOperator:
  nameservers:
    - 8.8.8.8:53
    - 1.1.1.1:53
```

### Advanced Configuration with Additional Arguments

```yaml
certmgrOperator:
  nameservers:
    - 8.8.8.8:53
    - 1.1.1.1:53
    - 9.9.9.9:53
  additionalArgs:
    - "--acme-http01-solver-nameservers=8.8.8.8:53,1.1.1.1:53"
    - "--v=2"
    - "--feature-gates=ExperimentalCertificateSigningRequestControllers=true"
```

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
